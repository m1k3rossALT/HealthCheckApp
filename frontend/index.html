<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>URL Health Check Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <table id="healthTable">
      <thead>
        <tr>
          <th>Applications</th>
          <th>Status</th>
          <th>Failures</th>
        </tr>
      </thead>
      <tbody>
        <!-- Repeat for each category -->
        <tr data-category="ICMRM">
          <td class="category-cell">
            <span>ICMRM</span>
            <button class="dropdown-toggle" onclick="toggleDropdown('ICMRM')">▼</button>
          </td>
          <td class="status-cell">-</td>
          <td class="failures-cell">-</td>
        </tr>
        <tr class="dropdown-row" id="dropdown-ICMRM">
          <td colspan="3" class="dropdown-content"></td>
        </tr>

        <tr data-category="MEDICMRM">
          <td class="category-cell">
            <span>MEDICMRM</span>
            <button class="dropdown-toggle" onclick="toggleDropdown('MEDICMRM')">▼</button>
          </td>
          <td class="status-cell">-</td>
          <td class="failures-cell">-</td>
        </tr>
        <tr class="dropdown-row" id="dropdown-MEDICMRM">
          <td colspan="3" class="dropdown-content"></td>
        </tr>

        <tr data-category="ICN - Navigator">
          <td class="category-cell">
             <span>ICN - Navigator</span>
            <button class="dropdown-toggle" onclick="toggleDropdown('ICN - Navigator')">▼</button>
          </td>
          <td class="status-cell">-</td>
          <td class="failures-cell">-</td>
        </tr>
        <tr class="dropdown-row" id="dropdown-ICN - Navigator">
          <td colspan="3" class="dropdown-content"></td>
        </tr>

        <tr data-category="ICN - CMIS">
          <td class="category-cell">
            <span>ICN - CMIS</span>
            <button class="dropdown-toggle" onclick="toggleDropdown('ICN - CMIS')">▼</button>
          </td>
          <td class="status-cell">-</td>
          <td class="failures-cell">-</td>
        </tr>
        <tr class="dropdown-row" id="dropdown-ICN - CMIS">
          <td colspan="3" class="dropdown-content"></td>
        </tr>

        <tr data-category="ICN - Desktops">
          <td class="category-cell">
            <span>ICN - Desktops</span>
            <button class="dropdown-toggle" onclick="toggleDropdown('ICN - Desktops')">▼</button>
          </td>
          <td class="status-cell">-</td>
          <td class="failures-cell">-</td>
        </tr>
        <tr class="dropdown-row" id="dropdown-ICN - Desktops">
          <td colspan="3" class="dropdown-content"></td>
        </tr>

        <tr data-category="Other URLs">
          <td class="category-cell">
            <span>Other URLs</span>
            <button class="dropdown-toggle" onclick="toggleDropdown('Other URLs')">▼</button>
          </td>
          <td class="status-cell">-</td>
          <td class="failures-cell">-</td>
        </tr>
        <tr class="dropdown-row" id="dropdown-Other URLs">
          <td colspan="3" class="dropdown-content"></td>
        </tr>
      </tbody>
    </table>

    <div id="buttonColumn" class="button-column">
      <button onclick="checkCategory('ICMRM')">▶</button>
      <button onclick="checkCategory('MEDICMRM')">▶</button>
      <button onclick="checkCategory('ICN - Navigator')">▶</button>
      <button onclick="checkCategory('ICN - CMIS')">▶</button>
      <button onclick="checkCategory('ICN - Desktops')">▶</button>
      <button onclick="checkCategory('Other URLs')">▶</button>
    </div>
  </div>

  <div class="check-all-container">
    <button onclick="checkAllCategories()">Check All</button>
  </div>

  <script src="urls.js"></script>
  <script>
    function alignButtons() {
      const rows = document.querySelectorAll('#healthTable tbody tr[data-category]');
      const buttons = document.querySelectorAll('#buttonColumn button');

      rows.forEach((row, index) => {
        const rowTop = row.offsetTop;
        const rowHeight = row.offsetHeight;
        const button = buttons[index];
        button.style.position = 'absolute';
        button.style.top = `${rowTop + rowHeight / 2}px`;
        button.style.transform = 'translateY(-50%)';
      });
    }

    window.addEventListener('load', alignButtons);
    window.addEventListener('resize', alignButtons);

    function toggleDropdown(category) {
      const row = document.getElementById(`dropdown-${category}`);
      const contentCell = row.querySelector('.dropdown-content');

      if (row.style.display === 'table-row') {
        row.style.display = 'none';
        contentCell.innerHTML = '';
      } else {
        row.style.display = 'table-row';
        const urls = urlMap[category] || [];
        contentCell.innerHTML = urls.map(u => `<div>${u}</div>`).join('');
      }

      alignButtons(); // Re-align buttons in case table height changes
    }
  </script>
</body>
</html>
