<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>URL Health Check Dashboard</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <table id="healthTable">
      <thead>
        <tr>
          <th>Applications</th>
          <th>Status</th>
          <th>Failures</th>
        </tr>
      </thead>
      <tbody>
        <!-- Repeat for each category -->
        <tr data-category="Authentication">
          <td class="category-cell">
            <span>Authentication</span>
            <button class="dropdown-toggle" onclick="toggleDropdown('Authentication')">▼</button>
          </td>
          <td class="status-cell">-</td>
          <td class="failures-cell">-</td>
        </tr>
        <tr class="dropdown-row" id="dropdown-Authentication">
          <td colspan="3" class="dropdown-content"></td>
        </tr>

        <tr data-category="Payments">
          <td class="category-cell">
            <span>Payments</span>
            <button class="dropdown-toggle" onclick="toggleDropdown('Payments')">▼</button>
          </td>
          <td class="status-cell">-</td>
          <td class="failures-cell">-</td>
        </tr>
        <tr class="dropdown-row" id="dropdown-Payments">
          <td colspan="3" class="dropdown-content"></td>
        </tr>

        <tr data-category="User Profile">
          <td class="category-cell">
             <span>User Profile</span>
            <button class="dropdown-toggle" onclick="toggleDropdown('User Profile')">▼</button>
          </td>
          <td class="status-cell">-</td>
          <td class="failures-cell">-</td>
        </tr>
        <tr class="dropdown-row" id="dropdown-User Profile">
          <td colspan="3" class="dropdown-content"></td>
        </tr>

        <tr data-category="Notifications">
          <td class="category-cell">
            <span>Notifications</span>
            <button class="dropdown-toggle" onclick="toggleDropdown('Notifications')">▼</button>
          </td>
          <td class="status-cell">-</td>
          <td class="failures-cell">-</td>
        </tr>
        <tr class="dropdown-row" id="dropdown-Notifications">
          <td colspan="3" class="dropdown-content"></td>
        </tr>

        <tr data-category="Analytics">
          <td class="category-cell">
            <span>Analytics</span>
            <button class="dropdown-toggle" onclick="toggleDropdown('Analytics')">▼</button>
          </td>
          <td class="status-cell">-</td>
          <td class="failures-cell">-</td>
        </tr>
        <tr class="dropdown-row" id="dropdown-Analytics">
          <td colspan="3" class="dropdown-content"></td>
        </tr>

        <tr data-category="Admin Panel">
          <td class="category-cell">
            <span>Admin Panel</span>
            <button class="dropdown-toggle" onclick="toggleDropdown('Admin Panel')">▼</button>
          </td>
          <td class="status-cell">-</td>
          <td class="failures-cell">-</td>
        </tr>
        <tr class="dropdown-row" id="dropdown-Admin Panel">
          <td colspan="3" class="dropdown-content"></td>
        </tr>
      </tbody>
    </table>

    <div id="buttonColumn" class="button-column">
      <button onclick="checkCategory('Authentication')">▶</button>
      <button onclick="checkCategory('Payments')">▶</button>
      <button onclick="checkCategory('User Profile')">▶</button>
      <button onclick="checkCategory('Notifications')">▶</button>
      <button onclick="checkCategory('Analytics')">▶</button>
      <button onclick="checkCategory('Admin Panel')">▶</button>
    </div>
  </div>

  <div class="check-all-container">
    <button onclick="checkAllCategories()">Check All</button>
  </div>

  <script src="urls.js"></script>
  <script>
    function alignButtons() {
      const rows = document.querySelectorAll('#healthTable tbody tr[data-category]');
      const buttons = document.querySelectorAll('#buttonColumn button');

      rows.forEach((row, index) => {
        const rowTop = row.offsetTop;
        const rowHeight = row.offsetHeight;
        const button = buttons[index];
        button.style.position = 'absolute';
        button.style.top = `${rowTop + rowHeight / 2}px`;
        button.style.transform = 'translateY(-50%)';
      });
    }

    window.addEventListener('load', alignButtons);
    window.addEventListener('resize', alignButtons);

    function toggleDropdown(category) {
      const row = document.getElementById(`dropdown-${category}`);
      const contentCell = row.querySelector('.dropdown-content');

      if (row.style.display === 'table-row') {
        row.style.display = 'none';
        contentCell.innerHTML = '';
      } else {
        row.style.display = 'table-row';
        const urls = urlMap[category] || [];
        contentCell.innerHTML = urls.map(u => `<div>${u}</div>`).join('');
      }

      alignButtons(); // Re-align buttons in case table height changes
    }
  </script>
</body>
</html>
